local Light = game:GetService("Lighting")
local originalAmbient = Light.Ambient
local originalColorShiftBottom = Light.ColorShift_Bottom
local originalColorShiftTop = Light.ColorShift_Top
local originalClockTime = Light.ClockTime

local RaelHubFunction = {}

function RaelHubFunction.CreateNotification(texto, duracao)
    local NotificationScreenGui = Instance.new("ScreenGui")
    NotificationScreenGui.Name = "RaelHubNotification"
    NotificationScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local notificationFrame = Instance.new("Frame")
    notificationFrame.Size = UDim2.new(0, 310, 0, 90)  -- Mantendo o tamanho original do container
    notificationFrame.Position = UDim2.new(1, 310, 1, -110)
    notificationFrame.BackgroundColor3 = Color3.new(0, 0, 0)
    notificationFrame.BackgroundTransparency = 1
    notificationFrame.ClipsDescendants = true
    notificationFrame.Parent = NotificationScreenGui

    local backgroundImage = Instance.new("ImageLabel")
    backgroundImage.Size = UDim2.new(1, 0, 1, 0)  -- A imagem ocupa todo o container
    backgroundImage.Position = UDim2.new(0, 0, 0, 0)
    backgroundImage.Image = "rbxassetid://18665679839"
    backgroundImage.BackgroundTransparency = 1
    backgroundImage.Parent = notificationFrame

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 20)
    corner.Parent = backgroundImage

    -- Mantendo o título como estava antes
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 25)
    titleLabel.Position = UDim2.new(0, 0, 0, 10)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = "Rael Hub"
    titleLabel.TextColor3 = Color3.fromRGB(34, 168, 110)
    titleLabel.TextScaled = true
    titleLabel.Font = Enum.Font.ArialBold
    titleLabel.Parent = notificationFrame

    -- Texto de notificação que se adapta ao tamanho da ImageLabel
    local notificationText = Instance.new("TextLabel")
    notificationText.Size = UDim2.new(1, 0, 0, 30)  -- Tamanho fixo da caixa de texto, como antes
    notificationText.Position = UDim2.new(0, 0, 0, 40)
    notificationText.BackgroundTransparency = 1
    notificationText.Text = texto
    notificationText.TextColor3 = Color3.new(1, 1, 1)
    notificationText.TextScaled = true
    notificationText.TextWrapped = true  -- Permitir quebra de linha
    notificationText.Font = Enum.Font.ArialBold
    notificationText.Parent = notificationFrame

    local padding = Instance.new("UIPadding")
    padding.PaddingTop = UDim.new(0, 5)
    padding.PaddingBottom = UDim.new(0, 5)
    padding.PaddingLeft = UDim.new(0, 10)
    padding.PaddingRight = UDim.new(0, 10)
    padding.Parent = notificationText

    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://7817336081"
    sound.Parent = NotificationScreenGui
    sound:Play()

    local function animateNotification()
        local finalPosition = UDim2.new(1, -310, 1, -110)
        notificationFrame:TweenPosition(finalPosition, "Out", "Quad", 0.7, true)
        wait(duracao)
        notificationFrame:TweenPosition(UDim2.new(1, 310, 1, -110), "In", "Quad", 1, true)
        wait(1)
        NotificationScreenGui:Destroy()
    end

    animateNotification()

    workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(animateNotification)
end

function RaelHubFunction.CreateEsp(objeto, cor, imageId, texto)
  if not objeto or not objeto:IsA("Model") or not objeto:FindFirstChild("HumanoidRootPart") then
    return
  end

  local highlight = Instance.new("Highlight")
  highlight.Name = "RaelHubDestaque"
  highlight.Adornee = objeto
  highlight.FillColor = cor
  highlight.Parent = objeto

  local billboard = Instance.new("BillboardGui")
  billboard.Name = "RaelHubIcon"
  billboard.Adornee = objeto:FindFirstChild("HumanoidRootPart")
  billboard.Size = UDim2.new(0, 30, 0, 30)
  billboard.StudsOffset = Vector3.new(0, 0, 0)
  billboard.AlwaysOnTop = true
  billboard.Parent = objeto

  local imageLabel = Instance.new("ImageLabel")
  imageLabel.Size = UDim2.new(1, 0, 1, 0)
  imageLabel.BackgroundTransparency = 1
  imageLabel.Image = "rbxassetid://" .. imageId
  imageLabel.Parent = billboard
  
  local textLabel = Instance.new("TextLabel")
  textLabel.Size = UDim2.new(1, 0, 1, 0)
  textLabel.BackgroundTransparency = 1
  textLabel.Text = texto
  textLabel.Position = UDim2.new(0, 0, 0, 20)
  textLabel.TextColor3 = cor
  textLabel.TextSize = 13
  textLabel.Font = Enum.Font.GothamBold
  textLabel.Parent = billboard
end

function RaelHubFunction.CreateEspObject(objeto, cor, imageId, texto)

  local highlight = Instance.new("Highlight")
  highlight.Name = "RaelHubDestaque"
  highlight.Adornee = objeto
  highlight.FillColor = cor
  highlight.Parent = objeto

  local billboard = Instance.new("BillboardGui")
  billboard.Name = "RaelHubIcon"
  billboard.Adornee = objeto:FindFirstChildOfClass("BasePart")
  billboard.Size = UDim2.new(0, 30, 0, 30)
  billboard.StudsOffset = Vector3.new(0, 0, 0)
  billboard.AlwaysOnTop = true
  billboard.Parent = objeto

  local imageLabel = Instance.new("ImageLabel")
  imageLabel.Size = UDim2.new(1, 0, 1, 0)
  imageLabel.BackgroundTransparency = 1
  imageLabel.Image = "rbxassetid://" .. imageId
  imageLabel.Parent = billboard
  
  local textLabel = Instance.new("TextLabel")
  textLabel.Size = UDim2.new(1, 0, 1, 0)
  textLabel.BackgroundTransparency = 1
  textLabel.Text = texto
  textLabel.Position = UDim2.new(0, 0, 0, 20)
  textLabel.TextColor3 = cor
  textLabel.TextSize = 13
  textLabel.Font = Enum.Font.GothamBold
  textLabel.Parent = billboard
end

function RaelHubFunction.CreateEspDistance(objeto, cor, texto, mostrarDistancia)
  local highlight = Instance.new("Highlight")
  highlight.Name = "RaelHubDestaque"
  highlight.Adornee = objeto
  highlight.FillColor = cor
  highlight.Parent = objeto

  local basePart = nil
  for _, descendant in ipairs(objeto:GetDescendants()) do
    if descendant.Name == "HumanoidRootPart" then
      basePart = descendant
      break
    elseif descendant:IsA("BasePart") then
      basePart = descendant
      break
    end
  end

  if not basePart then
    warn("Nenhuma BasePart encontrada no objeto: " .. objeto.Name)
    return
  end

  local billboard = Instance.new("BillboardGui")
  billboard.Name = "RaelHubIcon"
  billboard.Adornee = basePart
  billboard.Size = UDim2.new(0, 50, 0, 50)
  billboard.StudsOffset = Vector3.new(0, 0, 0)
  billboard.AlwaysOnTop = true
  billboard.Parent = objeto
    
  local textLabel = Instance.new("TextLabel")
  textLabel.Size = UDim2.new(1, 0, 1, 0)
  textLabel.BackgroundTransparency = 1
  textLabel.Text = texto
  textLabel.Position = UDim2.new(0, 0, 0, 0)
  textLabel.TextColor3 = cor
  textLabel.TextSize = 13
  textLabel.Font = Enum.Font.GothamBold
  textLabel.Parent = billboard

  local distanciaLabel = Instance.new("TextLabel")
  distanciaLabel.Size = UDim2.new(1, 0, 1, 0)
  distanciaLabel.BackgroundTransparency = 1
  distanciaLabel.Text = ""
  distanciaLabel.Position = UDim2.new(0, 0, 0, 12)
  distanciaLabel.TextColor3 = cor
  distanciaLabel.TextSize = 13
  distanciaLabel.Font = Enum.Font.GothamBold
  distanciaLabel.Parent = billboard

  if mostrarDistancia then
    game:GetService("RunService").RenderStepped:Connect(function()
      local player = game.Players.LocalPlayer
      local char = player.Character
      if char and char:FindFirstChild("HumanoidRootPart") then
        local playerPos = char.HumanoidRootPart.Position
        local objectPos = basePart.Position
        local distancia = (playerPos - objectPos).Magnitude

        distanciaLabel.Text = "Distance: " .. math.floor(distancia) .. " studs"
      end
    end)
  end
end

function RaelHubFunction.PlayersEspActive()
  local players = game:GetService("Players")
        
  for _, jogador in ipairs(players:GetPlayers()) do
    local personagem = jogador.Character

    if personagem then
      if not personagem:FindFirstChild("RaelHubDestaque") and not personagem:FindFirstChild("RaelHubIcon") then
        RaelHubFunction.CreateEsp(personagem, Color3.fromRGB(144, 238, 144), "117259180607823", jogador.Name)
      end
    end
  end
end

function RaelHubFunction.DisableEsp(objeto)
  if objeto then
    if objeto:FindFirstChild("RaelHubDestaque") and objeto:FindFirstChild("RaelHubIcon") then
      objeto:FindFirstChild("RaelHubDestaque"):Destroy()
      objeto:FindFirstChild("RaelHubIcon"):Destroy()
    end
  end
end

function RaelHubFunction.PlayersEspDisabled()
  local players = game:GetService("Players")
        
  for _, jogador in ipairs(players:GetPlayers()) do
    local personagem = jogador.Character

    if personagem then
      RaelHubFunction.DisableEsp(personagem)
    end
  end
end

function RaelHubFunction.EspPlayer()
  while RaelHubEspState do
    RaelHubFunction.PlayersEspActive()
    task.wait(1) -- Atraso para evitar execução rápida demais
  end
  RaelHubFunction.PlayersEspDisabled() -- Desativa o ESP se o estado mudar para false
end

function RaelHubFunction.EspMonstroActive(Monstros)
  for _, Monstro in ipairs(Monstros) do
    if Monstro then
        RaelHubFunction.CreateEsp(Monstro, Color3.fromRGB(255, 102, 102), "88229448947616", "")
    else
      print("Nenhum monstro encontrado.")
    end
  end
end

function RaelHubFunction.EspMonstroDisabled(Monstros)
  for _, Monstro in ipairs(Monstros) do
    if Monstro then
        RaelHubFunction.DisableEsp(Monstro)
    else
      print("Nenhum monstro encontrado.")
    end
  end
end

function RaelHubFunction.dofullbright()
  Light.Ambient = Color3.new(1, 1, 1)
  Light.ColorShift_Bottom = Color3.new(1, 1, 1)
  Light.ColorShift_Top = Color3.new(1, 1, 1)
  Light.ClockTime = 14 -- Deixa o céu de dia
end

function RaelHubFunction.restoreLighting()
  Light.Ambient = originalAmbient
  Light.ColorShift_Bottom = originalColorShiftBottom
  Light.ColorShift_Top = originalColorShiftTop
  Light.ClockTime = originalClockTime
end

local FlyRun = game:GetService("RunService")
local connection

function RaelHubFunction.FlyTo(destination, speed)
  local player = game.Players.LocalPlayer
  local character = player.Character
  if character then
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    local humanoid = character:FindFirstChildOfClass("Humanoid")

    if humanoidRootPart and humanoid then
     humanoid.Jump = true

      wait(0.2)

      local bodyVelocity = Instance.new("BodyVelocity")
      bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
      bodyVelocity.Velocity = (destination - humanoidRootPart.Position).unit * speed
      bodyVelocity.Parent = humanoidRootPart
      
      connection = FlyRun.Stepped:Connect(function()
        if (destination - humanoidRootPart.Position).magnitude < 5 then
          bodyVelocity:Destroy()
          humanoidRootPart.CFrame = CFrame.new(destination)
          StopFly()
        end
      end)

      return bodyVelocity
    end
  end
end

function StopFly(bodyVelocity)
  if connection then
    connection:Disconnect()
    connection = nil
  end

  if bodyVelocity then
    bodyVelocity:Destroy()
  end
end

local AutoRunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera

local autoClicking = false

function autoClicker()
  local screenWidth = camera.ViewportSize.X
  local screenHeight = camera.ViewportSize.Y
  local cornerX = screenWidth - 1
  local cornerY = 1

  while autoClicking do

    VirtualInputManager:SendMouseButtonEvent(cornerX, cornerY, 0, true, game, 0)
    VirtualInputManager:SendMouseButtonEvent(cornerX, cornerY, 0, false, game, 0)
    AutoRunService.Heartbeat:Wait()
  end
end

function RaelHubFunction.startAutoClicker()
    if not autoClicking then
        autoClicking = true
        coroutine.wrap(autoClicker)()
    end
end

function RaelHubFunction.stopAutoClicker()
    if autoClicking then
        autoClicking = false
    end
end

return RaelHubFunction